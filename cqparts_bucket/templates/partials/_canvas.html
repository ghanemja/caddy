<div id="wrap">
  <canvas id="canvas"></canvas>
  
  <!-- Instructions and Generate Code button overlaid at bottom of viewer -->
  <div id="codegenOverlay" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255, 255, 255, 0.95); border-top: 1px solid #e2e8f0; padding: 12px 16px; z-index: 100; box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);">
    <div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap;">
      <label style="font-size: 12px; font-weight: 600; color: #475569; min-width: 80px;">Instructions:</label>
      <textarea
        id="prompt"
        placeholder="Describe what you want (e.g., 'Add 6 wheels total, 3 per side like in the image')"
        style="flex: 1; min-width: 200px; min-height: 40px; max-height: 100px; padding: 8px; border: 1px solid #cbd5e1; border-radius: 6px; resize: vertical; font-size: 12px; font-family: inherit;"
      ></textarea>
      <button id="btn-codegen" style="padding: 10px 20px; background: #3b82f6; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: 600; white-space: nowrap;">ðŸš€ Generate Code</button>
    </div>
    <div id="codegenStatus" style="margin-top: 8px; font-size: 11px; color: #64748b; opacity: 0.8;">Ready</div>
  </div>
  
  <!-- Instruction bar overlaid at bottom of viewer (for canvas-specific instructions) -->
  <div id="instructionBar" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255, 255, 255, 0.95); border-top: 1px solid #e2e8f0; padding: 8px 12px; z-index: 101; display: none; box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);">
    <div style="display: flex; align-items: center; gap: 8px;">
      <label style="font-size: 12px; font-weight: 600; color: #475569;">Instructions:</label>
      <textarea
        id="canvasPrompt"
        placeholder="Describe what you want to change in the 3D model..."
        style="flex: 1; min-height: 32px; max-height: 80px; padding: 6px 8px; border: 1px solid #cbd5e1; border-radius: 6px; resize: vertical; font-size: 12px; font-family: inherit;"
      ></textarea>
      <button id="applyCanvasInstructions" style="padding: 6px 12px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 600;">Apply</button>
      <button id="closeInstructionBar" style="padding: 6px 8px; background: #f1f5f9; color: #64748b; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; line-height: 1;">Ã—</button>
    </div>
  </div>
</div>
